<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>course</title>
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/static/css/list.css}">
    <link rel="stylesheet" th:href="@{/static/css/zzsc-demo.css}">
    <link rel="stylesheet" th:href="@{/static/css/jquery-accordion-menu.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/owl.carousel.css}">
    <link rel="stylesheet" th:href="@{/static/css/owl.theme.default.min.css}">
    <!-- MAIN CSS -->
    <link rel="stylesheet" th:href="@{/static/css/templatemo-style.css}">
    <link rel="stylesheet" th:href="@{/static/css/videoDisplay.css}">
</head>

<body>
<!-- MENU -->
<section class="navbar custom-navbar navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon icon-bar"></span>
                <span class="icon icon-bar"></span>
                <span class="icon icon-bar"></span>
            </button>
            <!-- lOGO TEXT HERE -->
            <a th:href="@{/}" class="navbar-brand"><img th:src="@{/static/images/png/logoko.png}" width="80px" alt=""></a>
        </div>

        <!-- MENU LINKS -->
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li th:if="${session.user}==null"><a th:href="@{/}">登录/注册</a></li>
                <li id="cover" th:if="${session.user}!=null">
                    <a th:href="@{/info}">
                    <img th:src="|/pic/avatar/${session.user.avatar}|" class="img-circle avatar" width="38px" height="38px">
                    </a>
                </li>
            </ul>
        </div>

    </div>
</section>

<!--课程标题名称-->

<!--播放列表-->
<div class="zzsc-container">
    <div class="content">
        <div id="jquery-accordion-menu" class="jquery-accordion-menu red">
            <div class="jquery-accordion-menu-header" id="form">
                <span th:text="${session.course.cname}">Known ssm框架教学</span>
                <div class="collectAll">
                    <span class="collect" id="collect" my-icon="collect1" th:if="${session.isCollect}==null"></span>
                    <span class="collect" id="collect" my-icon="collect2" th:if="${session.isCollect}!=null"></span>
                    <span class="collect">收藏</span>
                </div>
            </div>
            <ul id="demo-list" >
                <li th:each="chapter:${session.course.chapters}">
                    <a href="#">
                    <i class="fa fa-video-camera" th:text="${chapter.chapterName}">Home</i>
                    </a>
                    <ul class="submenu">
                        <li th:each="video:${chapter.videos}">
                            <a th:href="@{/video(vid=${video.id})}">
                                <i class="fa fa-video-camera" style="color:aliceblue" th:text="${video.videoName}"></i>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class="jquery-accordion-menu-footer">
                <!--Footer-->
            </div>
        </div>
    </div>
    <div class="otherCourse">
        <h3>推荐课程</h3>
        <ul class="nav nav-stacked recommendCourse" th:each="course:${session.relatedCourses}">
            <li>
                <div class="courseImg">
                    <a th:href="@{/courseDisplay(cid=${course.id})}">
                        <img th:src="|/pic/course/${course.pic}|" alt="" width="150px">
                    </a>
                </div>
                <div class="courseInfo">
                    <ul class="nav nav-stacked">
                        <li th:text="${course.cname}">课程名称</li>
                        <li th:text="${course.direction}">课程方向</li>
                        <li th:text="${course.introduction}">课程简介</li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
</div>

<!-- FOOTER -->
<footer id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6">
                <div class="footer-info">
                    <div class="section-title">
                        <h2>Headquarter</h2>
                    </div>
                    <address>
                        <p>1800 dapibus a tortor pretium,<br> Integer nisl dui, ABC 12000</p>
                    </address>

                    <ul class="social-icon">
                        <li><a href="#" class="fa fa-facebook-square" attr="facebook icon"></a></li>
                        <li><a href="#" class="fa fa-twitter"></a></li>
                        <li><a href="#" class="fa fa-instagram"></a></li>
                    </ul>

                    <div class="copyright-text">
                        <p>Copyright &copy; 2018.Company name All rights reserved.
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-6">
                <div class="footer-info">
                    <div class="section-title">
                        <h2>Contact Info</h2>
                    </div>
                    <address>
                        <p>+65 2244 1100, +66 1800 1100</p>
                        <p><a href="">hello@youremail.co</a></p>
                    </address>

                    <div class="footer_menu">
                        <h2>Quick Links</h2>
                        <ul>
                            <li><a href="#">Career</a></li>
                            <li><a href="#">Investor</a></li>
                            <li><a href="#">Terms & Conditions</a></li>
                            <li><a href="#">Refund Policy</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-12">
                <div class="footer-info newsletter-form">
                    <div class="section-title">
                        <h2>Newsletter Signup</h2>
                    </div>
                    <div>
                        <div class="form-group">
                            <form action="#" method="get">
                                <input type="email" class="form-control" placeholder="Enter your email" name="email"
                                       id="email" required="">
                                <input type="submit" class="form-control" name="submit" id="form-submit_two"
                                       value="Send me">
                            </form>
                            <span><sup>*</sup> Please note - we do not spam your email.</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</footer>

<script th:src="@{/static/js/jquery.js}"></script>
<script th:src="@{/static/js/course.js}"></script>
<script th:src="@{/static/js/jquery-accordion-menu.js}" type="text/javascript"></script>

<script th:inline="javascript">
    //得到项目根路径
    function getRootPath() {
        var pathName = window.location.pathname.substring(1);
        var webName = pathName == '' ? '' : pathName.substring(0, pathName.indexOf('/'));
        return window.location.protocol + '//' + window.location.host + '/' + webName + '/';
    }

    $(".collectAll").click(function () {
        var user = [[${session.user}]];
        if(user==null) {
            alert("您还未登录，请先去主页登录后再关注该老师！");
            window.location.href = getRootPath();
        }
        $.ajax({
            url:getRootPath()+"collectCourse",
            type:"POST",
            success:function (result) {
                if(result.code == 100){
                    alert("取消收藏成功！");
                    $("#collect").attr("my-icon", "collect1");
                }else{
                    alert("收藏成功！");
                    $("#collect").attr("my-icon", "collect2");
                }
            }
        });
    });
</script>
</body>